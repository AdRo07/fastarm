fastarm

This toolkit contains a set of fast memcpy/memset variants for ARM
platforms. They either use the standard register file, or optionally
NEON instructions,

Several basic families of variants are provided; the current ones are
the "new memcpy" variants which are the default for memcpy replacement,
which generally do not overfetch beyond the source region and can be
configured to use unaligned memory access for small sizes, or to use
strictly aligned memory access. This family can also be configured to
include a fast path for smaller sizes (this is the default), disabling
this results in smaller code size at the expense of worse performance
for small sizes. NEON opimized versions, which are generally faster
with reduced code size, are also provided.

To compile the benchmark program, run 'make'. This will compile in a
plethora of variants with different preload strategies, block sizes,
alignment etc.

A benchmark program to compare various memcpy variants is provided. Try
something like "./benchmark --memcpy ad --all". (Use --memcpy aj on the
Raspberry Pi platform).

To compile a memcpy replacement library, set PLATFORM to one of the
values described at the beginning of the Makefile. This selects the
cache line size to use and whether to use NEON versions.

Optionally disable Thumb2 mode compilation by commenting out the THUMBFLAGS
definition. It must be disabled on the Raspberry Pi.

Then run:

    sudo make install_memcpy_replacement

The replacement memcpy/memset shared library will be installed into
/usr/lib/arm-linux-gnueabihf/ as libfastarm.so.

To enable the use of the replacement memcpy in applications, create or edit
the file /etc/ld.so.preload so that it contains the line:

    /usr/lib/arm-linux-gnueabihf/libfastarm.so

On the RPi platform, references to libcofi_rpi.so should be commented out
or deleted. The new memcpy should now be activated for newly launched
programs. To be sure, reboot or run:

    sudo ldconfig

To revert to the default optimized memcpy on the RPi platform,
edit /etc/ld.so.preload so that it contains the line:

    /usr/lib/arm-linux-gnueabihf/libcofi_rpi.so

instead of the one using libfastarm.so.
